### Variables de entorno
@baseUrl = http://localhost:8080
@contentType = application/json
@token = eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJtYXJpb0BnbWFpbC5jb20iLCJpYXQiOjE3NjQyOTI3NDQsImV4cCI6MTc2NDI5NjM0NH0.Zuy9h1AYFu0DqYpfa3eEO82mAh28LsBb3q6z_zZFrM4
### MONITOR ENDPOINTS
### ===========================================

### Obtener monitoreo del sistema
GET {{baseUrl}}/api/monitor/metrics

### ===========================================
### AUTHENTICATION ENDPOINTS
### ===========================================

### Login
POST {{baseUrl}}/api/auth/login
Content-Type: {{contentType}}

{
    "correo": "mario@gmail.com",
    "password": "123456Aa@"
}

### Solicitar restablecimiento de contraseña (olvido de contraseña)
POST {{baseUrl}}/api/auth/forgot-password
Content-Type: {{contentType}}

{
    "correo": "u22239328@utp.edu.pe"
}

### Restablecer contraseña con token
POST {{baseUrl}}/api/auth/reset-password
Content-Type: {{contentType}}

{
    "token": "7728cc4b-0756-4c95-ac33-f6ac28d4ec84",
    "nuevaPassword": "Alejandro123!3"
}

### ===========================================
### USUARIO ENDPOINTS
### ===========================================

### Listar todos los usuarios
GET {{baseUrl}}/api/usuarios/listar
Authorization: Bearer {{token}}

### Listar usuarios por rol
GET {{baseUrl}}/api/usuarios/listar/ADMINISTRADOR
Authorization: Bearer {{token}}

### Obtener usuario por ID
GET {{baseUrl}}/api/usuarios/118
Authorization: Bearer {{token}}

### Crear usuario
POST {{baseUrl}}/api/usuarios
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "correo": "mario@gmail.com",
    "password": "123456Aa@",
    "nombre": "Mario",
    "apellido": "Pinzón",
    "numeroCelular": "123456789",
    "rol": "ADMINISTRADOR",
    "numeroIdentificacion": "12345678",
    "nombrePais": "Perú",
    "idTipoIdentificacion": 1
}

### Actualizar usuario (PUT)
PUT {{baseUrl}}/api/usuarios/118
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "correo": "actualizado@example.com",
    "nombre": "Juan Carlos",
    "apellido": "García López",
    "estado": "ACTIVO",
    "numeroCelular": "987654321",
    "numeroIdentificacion": "12345678",
    "nombrePais": "Perú",
    "idTipoIdentificacion": 1
}

### Actualizar usuario parcialmente (PATCH)
PATCH {{baseUrl}}/api/usuarios/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "correo" : "alejandrocastillojara30@gmail.com"
}

### Eliminar usuario (cambio de estado a SUSPENDIDO)
DELETE {{baseUrl}}/api/usuarios/20
Authorization: Bearer {{token}}

### Restaurar usuario
POST {{baseUrl}}/api/usuarios/29/restaurar
Authorization: Bearer {{token}}

### ===========================================
### CATEGORÍA ENDPOINTS
### ===========================================

### Listar categorías
GET {{baseUrl}}/api/categorias/listar
Authorization: Bearer {{token}}

### Listar categorías activas (solo estado = true)
GET {{baseUrl}}/api/categorias/activas
Authorization: Bearer {{token}}

### Obtener categoría por ID
GET {{baseUrl}}/api/categorias/obtener/5
Authorization: Bearer {{token}}

### Crear categoría
POST {{baseUrl}}/api/categorias/crear
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "nombre": "Seguridad Informática"
}

### Eliminar categoría
DELETE {{baseUrl}}/api/categorias/eliminar/1
Authorization: Bearer {{token}}

### ===========================================
### CURSO/DIPLOMADO ENDPOINTS
### ===========================================

### Listar cursos/diplomados
GET {{baseUrl}}/api/cursos-diplomados/listar
Authorization: Bearer {{token}}

### Listar cursos/diplomados para index
GET {{baseUrl}}/api/cursos-diplomados/listar-index
Authorization: Bearer {{token}}

### Obtener curso/diplomado por ID
GET {{baseUrl}}/api/cursos-diplomados/obtener/5
Authorization: Bearer {{token}}

### Crear curso/diplomado
POST {{baseUrl}}/api/cursos-diplomados/crear
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "titulo": "Administración de Redes 3",
    "objetivo": "Curso avanzado de Base de Datos para desarrolladores",
    "idCategoria": 4,
    "tipo": false,
    "otorgaCertificado": true,
    "urlCurso": "https://ejemplo.com/base-de-datos-2"
}

### Eliminar curso/diplomado
DELETE {{baseUrl}}/api/cursos-diplomados/eliminar/1
Authorization: Bearer {{token}}

### ===========================================
### PROGRAMACIÓN CURSO ENDPOINTS
### ===========================================

### Listar todas las programaciones
GET {{baseUrl}}/api/programacioncursos
Authorization: Bearer {{token}}

### Listar programaciones disponibles
GET {{baseUrl}}/api/programacioncursos/disponibles
Authorization: Bearer {{token}}

### Obtener programación por ID
GET {{baseUrl}}/api/programacioncursos/1
Authorization: Bearer {{token}}

### Crear programación de curso
POST {{baseUrl}}/api/programacioncursos
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "modalidad": "VIRTUAL",
    "duracionCurso": 120,
    "horasSemanales": 8,
    "fechaInicio": "2025-12-01",
    "fechaFin": "2026-06-01",
    "monto": 600.00,
    "idCursoDiplomado": 28
}

###  Campo "duracionMeses" es opcional:
###  Si tiene valor : Se generan cuotas AUTO al matricular
###  Si es null o 0: funciona sin cuotas automaticas xd

### Actualizar programación de curso
PUT {{baseUrl}}/api/programacioncursos/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "modalidad": "PRESENCIAL",
    "duracionCurso": 150,
    "horasSemanales": 10,
    "fechaInicio": "2026-01-10",
    "fechaFin": "2026-04-20",
    "monto": 650.00,
    "idCursoDiplomado": 2
}

### Eliminar programación de curso
DELETE {{baseUrl}}/api/programacioncursos/1
Authorization: Bearer {{token}}

### ===========================================
### MATRÍCULA ENDPOINTS
### ===========================================

### Listar matrículas
GET {{baseUrl}}/api/matriculas/listar
Authorization: Bearer {{token}}

### Crear matrícula 
POST {{baseUrl}}/api/matriculas
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idProgramacionCurso": 6
}

### el estado de la matricula se actualiza automaticamente a EN_PROCESO al ser aprobada.

### Cancelar matrícula
PUT {{baseUrl}}/api/matriculas/1/cancelar
Authorization: Bearer {{token}}

### Obtener detalle de matrícula (incluye cuotas si las tiene)
GET {{baseUrl}}/api/matriculas/23/detalle
Authorization: Bearer {{token}}

### Aplicar descuento personalizado a matrícula existente
###  valida que la matrícula no esté cancelada ni pagada
###  valida que el descuento esté vigente
### recalcula el monto total con el nuevo descuento
### mantiene intactas las cuotas ya pagadas
### redistribuye el saldo pendiente entre las cuotas pendientes
PUT {{baseUrl}}/api/matriculas/23/aplicar-descuento
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idDescuento": 2
}


### ===========================================
### DESCUENTO ENDPOINTS
### ===========================================

### Listar descuentos
GET {{baseUrl}}/api/descuentos/listar
Authorization: Bearer {{token}}

### Obtener descuento por ID
GET {{baseUrl}}/api/descuentos/obtener/1
Authorization: Bearer {{token}}

### Crear descuento
POST {{baseUrl}}/api/descuentos/crear
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "tipoDescuento": "MONTO",
    "valor": 60.00,
    "vigente": true,
    "fechaInicio": "2024-01-01",
    "fechaFin": "2025-12-31"
}

### Actualizar descuento
PUT {{baseUrl}}/api/descuentos/actualizar
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idDescuento": 1,
    "tipoDescuento": "MONTO",
    "valor": 10.00,
    "vigente": true,
    "fechaInicio": "2025-01-01",
    "fechaFin": "2025-10-30"
}

### Eliminar descuento
DELETE {{baseUrl}}/api/descuentos/eliminar/1
Authorization: Bearer {{token}}

### ===========================================
### DESCUENTO APLICACIÓN ENDPOINTS
### ===========================================

### Listar aplicaciones de descuento
GET {{baseUrl}}/api/aplicaciondescuento/listar
Authorization: Bearer {{token}}

### Obtener aplicación de descuento por ID
GET {{baseUrl}}/api/aplicaciondescuento/obtener/1
Authorization: Bearer {{token}}

### Crear aplicación de descuento
POST {{baseUrl}}/api/aplicaciondescuento/crear
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idDescuento": 3,
    "tipoAplicacion": "GENERAL",
    "idMatricula": 10
}

### Actualizar aplicación de descuento
PUT {{baseUrl}}/api/aplicaciondescuento/actualizar/4
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idDescuento": 3,
    "tipoAplicacion": "CATEGORIA",
    "idCategoria": 1
}

### Eliminar aplicación de descuento
DELETE {{baseUrl}}/api/aplicaciondescuento/eliminar/1
Authorization: Bearer {{token}}

### ===========================================
### PAGO ENDPOINTS
### ===========================================

### Registrar pago (FORMA TRADICIONAL - pago manual)
POST {{baseUrl}}/api/pagos
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idMatricula": 7,
    "idMetodoPago": 1,
    "monto": 74.00
}

### El endpoint POST /api/pagos detecta automáticamente cuotas pendientes
### Listar pagos por matrícula automaticas y las normales
GET {{baseUrl}}/api/pagos/matricula/7
Authorization: Bearer {{token}}

### Actualizar pago
PUT {{baseUrl}}/api/pagos/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idMetodoPago": 1,
    "monto": 100.00,
    "numeroCuota": 1
}

### ===========================================
### MÉTODO PAGO ENDPOINTS
### ===========================================

### Listar métodos de pago activos
GET {{baseUrl}}/api/metodos-pago/activos
Authorization: Bearer {{token}}

### Listar todos los métodos de pago
GET {{baseUrl}}/api/metodos-pago
Authorization: Bearer {{token}}

### Obtener método de pago por ID
GET {{baseUrl}}/api/metodos-pago/1
Authorization: Bearer {{token}}

### Crear método de pago
POST {{baseUrl}}/api/metodos-pago
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "tipoMetodo": "TARJETA",
    "descripcion": "Pago con tarjeta de crédito",
    "requisitos": "Número de tarjeta, fecha de vencimiento, CVV",
    "activo": true
}

### Actualizar método de pago
PUT {{baseUrl}}/api/metodos-pago/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "tipoMetodo": "TRANSFERENCIA",
    "descripcion": "Pago por transferencia bancaria",
    "requisitos": "Número de cuenta, banco de destino",
    "activo": true
}

### Cambiar estado del método de pago
PUT {{baseUrl}}/api/metodos-pago/1/estado?activo=false
Authorization: Bearer {{token}}

### Eliminar método de pago
DELETE {{baseUrl}}/api/metodos-pago/1
Authorization: Bearer {{token}}

### ===========================================
### TIPO IDENTIFICACIÓN ENDPOINTS
### ===========================================

### Listar tipos de identificación
GET {{baseUrl}}/api/tipos-identificacion
Authorization: Bearer {{token}}

### Obtener tipo de identificación por ID
GET {{baseUrl}}/api/tipos-identificacion/1
Authorization: Bearer {{token}}

### Crear tipo de identificación
POST {{baseUrl}}/api/tipos-identificacion
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "nombre": "Pasaporte",
    "descripcion": "Documento de viaje internacional"
}

### Actualizar tipo de identificación
PUT {{baseUrl}}/api/tipos-identificacion/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "nombre": "CE",
    "descripcion": "Carnet de Extranjería"
}

### Eliminar tipo de identificación
DELETE {{baseUrl}}/api/tipos-identificacion/1
Authorization: Bearer {{token}}

### ===========================================
### PAÍS ENDPOINTS
### ===========================================

### Listar países
GET {{baseUrl}}/api/paises
Authorization: Bearer {{token}}

### Obtener país por ID
GET {{baseUrl}}/api/paises/1
Authorization: Bearer {{token}}

### Crear país
POST {{baseUrl}}/api/paises
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "nombre": "Colombia"
}

### Actualizar país
PUT {{baseUrl}}/api/paises/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "nombre": "Colombia Actualizada"
}

### Eliminar país
DELETE {{baseUrl}}/api/paises/1
Authorization: Bearer {{token}}

### ===========================================
### SPONSOR ENDPOINTS
### ===========================================

### Listar sponsors (público)
GET {{baseUrl}}/api/sponsors/listar

### Obtener sponsor por ID
GET {{baseUrl}}/api/sponsors/obtener/1
Authorization: Bearer {{token}}

### Crear sponsor
# Nota: Usar Postman/Thunder Client para subir archivos 
# - Método: POST
# - URL: http://localhost:8080/api/sponsors/crear
# - Body → form-data
# - Campos: nombre (text) + imagen (file)
POST {{baseUrl}}/api/sponsors/crear
Authorization: Bearer {{token}}

### Actualizar sponsor
# Nota: Usar Postman/Thunder Client
# - imagen es opcional (si no se envía, mantiene la imagen actual)
PUT {{baseUrl}}/api/sponsors/actualizar/1
Authorization: Bearer {{token}}

### Eliminar sponsor (elimina también la imagen física)
DELETE {{baseUrl}}/api/sponsors/eliminar/1
Authorization: Bearer {{token}}

### ===========================================
### TESTIMONIO ENDPOINTS
### ===========================================

### Listar todos los testimonios
GET {{baseUrl}}/api/testimonios
Authorization: Bearer {{token}}

### Obtener testimonio por ID
GET {{baseUrl}}/api/testimonios/1
Authorization: Bearer {{token}}

### Crear testimonio
POST {{baseUrl}}/api/testimonios
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "comentario": "Excelente curso, muy útil.",
    "estadoAprobado": false,
    "idUsuario": { "idUsuario": 21 }
}

### Actualizar testimonio (PUT)
PUT {{baseUrl}}/api/testimonios/1
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "comentario": "Comentario actualizado",
    "estadoAprobado": false,
    "idUsuario": { "idUsuario": 21 }
}

### Eliminar testimonio
DELETE {{baseUrl}}/api/testimonios/1
Authorization: Bearer {{token}}

### Asignar aprobador / cambiar estado de aprobación
PUT {{baseUrl}}/api/testimonios/1/aprobacion
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "idAprobador": 3,
    "estadoAprobado": true
}

### ===========================================
### CONFIGURACIÓN GENERAL ENDPOINTS
### ===========================================

### Obtener configuración general
GET {{baseUrl}}/api/configuracion/general
Authorization: Bearer {{token}}

### Actualizar configuración general
PUT {{baseUrl}}/api/configuracion/general
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "numeroEstudiantes": 1500,
    "numeroCertificaciones": 2000,
    "numeroInstructores": 50,
    "numeroCursos": 120
}

### ===========================================
### CONFIGURACIÓN CONTACTO ENDPOINTS
### ===========================================

### Obtener configuración de contacto
GET {{baseUrl}}/api/configuracion/contacto
Authorization: Bearer {{token}}

### Actualizar configuración de contacto
PUT {{baseUrl}}/api/configuracion/contacto
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "correoContacto": "contacto@cepsac.edu.pe",
    "telefono": "+51 999 999 999",
    "whatsapp": "+51 999 999 999",
    "direccion": "Av. Principal 123, Lima, Perú",
    "facebook": "https://facebook.com/cepsac",
    "instagram": "https://instagram.com/cepsac",
    "linkedin": "https://linkedin.com/company/cepsac",
    "twitter": "https://twitter.com/cepsac"
}

### ===========================================
### CONFIGURACIÓN SEO ENDPOINTS
### ===========================================

### Obtener configuración SEO
GET {{baseUrl}}/api/configuracion/seo
Authorization: Bearer {{token}}

### Actualizar configuración SEO
PUT {{baseUrl}}/api/configuracion/seo
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "tituloSitio": "CEPSAC - Centro de Educación Profesional",
    "descripcionMeta": "Centro de educación profesional especializado en cursos y diplomados de alta calidad",
    "keywords": "educación, cursos, diplomados, certificaciones, capacitación profesional",
    "imagenOG": "https://res.cloudinary.com/..."
}

### Subir imagen Open Graph
# Nota: Usar Postman/Thunder Client para subir archivos
# - Método: POST
# - URL: http://localhost:8080/api/configuracion/seo/upload-imagen-og
# - Body → form-data
# - Campo: file (file)
POST {{baseUrl}}/api/configuracion/seo/upload-imagen-og
Authorization: Bearer {{token}}
